# –ü–æ—Ç–æ–∫ —É–Ω–∏–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ–æ—Ç–æ - –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

## –¢–µ–∫—É—â–∏–π –ø–æ—Ç–æ–∫ (–®–∞–≥ –∑–∞ —à–∞–≥–æ–º)

### 1Ô∏è‚É£ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "üñº –£–Ω–∏–∫–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ"
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `unique_photo_start()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_PHOTO`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** "–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ —É–Ω–∏–∫–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å"

---

### 2Ô∏è‚É£ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `receive_photo()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_PHOTO_COPIES`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
‚úÖ –§–æ—Ç–æ –ø–æ–ª—É—á–µ–Ω–æ!

–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ø–∏–π (–æ—Ç 1 –¥–æ 10):
[1] [2] [3] [4] [5]
[6] [7] [8] [9] [10]
[‚óÄÔ∏è –ù–∞–∑–∞–¥]
```

---

### 3Ô∏è‚É£ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "5")
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `select_copies_count()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_FILE_FORMAT`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
üìÅ –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:
[JPEG] [PNG] [WEBP]
[‚óÄÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é]
```
**–≠—Ç–æ –Ω–æ–≤—ã–π —à–∞–≥! ‚ú®**

---

### 4Ô∏è‚É£ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, "JPEG")
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `select_file_format()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_FLIP_CHOICE`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
üîÑ –û—Ç—Ä–∞–∑–∏—Ç—å –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏?
[‚úÖ –î–∞] [‚ùå –ù–µ—Ç]
[‚óÄÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é]
```
**–≠—Ç–æ –Ω–æ–≤—ã–π —à–∞–≥! ‚ú®**

---

### 5Ô∏è‚É£ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ù–µ—Ç")
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `select_flip_choice()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_TEXT_CHOICE`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
‚úçÔ∏è –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç?
[‚úÖ –î–∞] [‚ùå –ù–µ—Ç]
[‚óÄÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é]
```
**–≠—Ç–æ –Ω–æ–≤—ã–π —à–∞–≥! ‚ú®**

---

### 6Ô∏è‚É£ A. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª "–î–∞" –¥–ª—è —Ç–µ–∫—Å—Ç–∞
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `select_text_choice()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_TEXT_INPUT`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
‚úçÔ∏è –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ —Ñ–æ—Ç–æ:

(–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
```

#### 6Ô∏è‚É£ A1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, "¬© My Brand 2026")
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `receive_text_input()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_OVERLAY_CHOICE`
**–ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 7**

---

### 6Ô∏è‚É£ B. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª "–ù–µ—Ç" –¥–ª—è —Ç–µ–∫—Å—Ç–∞
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `select_text_choice()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_OVERLAY_CHOICE`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
‚ûï –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ?
[‚úÖ –î–∞] [‚ùå –ù–µ—Ç]
[‚óÄÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é]
```
**–ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 7**

---

### 7Ô∏è‚É£ A. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª "–î–∞" –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ñ–æ—Ç–æ
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `select_overlay_choice()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_OVERLAY_PHOTO`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
üì∑ –û—Ç–ø—Ä–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –Ω–∞–ª–æ–∂–µ–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–µ:
```

#### 7Ô∏è‚É£ A1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ç–æ—Ä–æ–µ —Ñ–æ—Ç–æ
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `receive_overlay_photo()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_OVERLAY_POSITION`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
üìç –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–∑–∏—Ü–∏—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ñ–æ—Ç–æ:
[‚ÜñÔ∏è –í–µ—Ä—Ö-–ª–µ–≤–æ] [‚ÜóÔ∏è –í–µ—Ä—Ö-–ø—Ä–∞–≤–æ]
[‚ÜôÔ∏è –ù–∏–∑-–ª–µ–≤–æ] [‚ÜòÔ∏è –ù–∏–∑-–ø—Ä–∞–≤–æ]
[üéØ –¶–µ–Ω—Ç—Ä]
[‚óÄÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é]
```

#### 7Ô∏è‚É£ A2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ù–∏–∑-–ø—Ä–∞–≤–æ")
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `select_overlay_position()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `WAITING_FOR_OVERLAY_OPACITY`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
üé® –í–≤–µ–¥–∏—Ç–µ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ñ–æ—Ç–æ (0-100):

0 = –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ
100 = –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ

(–û—Ç–ø—Ä–∞–≤—å—Ç–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 100)
```

#### 7Ô∏è‚É£ A3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "40")
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `receive_overlay_opacity()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `ConversationHandler.END`
**–î–µ–π—Å—Ç–≤–∏–µ:** –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
**–ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 8**

---

### 7Ô∏è‚É£ B. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±—Ä–∞–ª "–ù–µ—Ç" –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ñ–æ—Ç–æ
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `select_overlay_choice()`
**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `ConversationHandler.END`
**–î–µ–π—Å—Ç–≤–∏–µ:** –°—Ä–∞–∑—É –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
**–ü–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 8**

---

### 8Ô∏è‚É£ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `process_photo_uniquification()`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...
```
–ó–∞—Ç–µ–º:
```
‚è≥ –°–æ–∑–¥–∞—é 5 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ø–∏–π...
–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è.
```

---

### 9Ô∏è‚É£ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
**–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `TaskManager.poll_and_send_results()`
**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
```
‚úÖ –ì–æ—Ç–æ–≤–æ! –°–æ–∑–¥–∞–Ω–æ 5 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–ø–∏–π
```
–ó–∞—Ç–µ–º –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ 5 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏:
- –§–æ—Ä–º–∞—Ç: JPEG
- –û—Ç—Ä–∞–∂–µ–Ω–∏–µ: –ù–µ—Ç
- –¢–µ–∫—Å—Ç: "¬© My Brand 2026"
- –î–æ–ø. —Ñ–æ—Ç–æ: –õ–æ–≥–æ—Ç–∏–ø –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É —Å –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é 40%

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –±–æ—Ç–∞ (Ctrl+C)
# –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
cd creo-bot
python main.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ï—Å–ª–∏ –±–æ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Railway/Heroku)
–ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å git commit –∏ push:
```bash
cd creo-bot
git add .
git commit -m "Add advanced photo uniquification options"
git push
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker
```bash
docker-compose down
docker-compose up --build
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–æ–¥–∞

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
1. ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
2. ‚úÖ –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω
3. ‚úÖ Celery worker –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
python -m py_compile bot/handlers/uniquification.py
python -m py_compile main.py
python -m py_compile workers/tasks/uniquification_tasks.py
python -m py_compile workers/uniquification/photo_uniquifier.py
```

---

## –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ë–æ—Ç –Ω–µ –≤–∏–¥–∏—Ç –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –§–∞–π–ª `main.py` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `select_copies_count` –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
- ConversationHandler –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∫–æ–¥–∞

‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–æ–≤–µ—Ä–µ–Ω
‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã
‚úÖ –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å–æ–∑–¥–∞–Ω—ã

**–û—Å—Ç–∞–ª–æ—Å—å:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π!
